{"ast":null,"code":"var _class;\nimport { catchError, of, tap } from 'rxjs';\nimport { v4 as uuid } from 'uuid';\nimport { environment } from 'src/environments/environment.development';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class TasksService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = environment.apiUrl;\n    this.storageTasks = [];\n  }\n  loadLocalStorage() {\n    if (!localStorage.getItem('history')) return;\n    this._tagsHistory = JSON.parse(localStorage.getItem('history'));\n    if (this._tagsHistory.length === 0) return;\n    this.searchTag(this._tagsHistory[0]);\n  }\n  getToDosByStatus(status) {\n    return this.http.get(`${this.apiUrl}/todos/?status=${status}`).pipe(tap(todos => {\n      console.log(todos);\n      this.storageTasks;\n    }), catchError(() => {\n      console.log(`- Error al extraer ToDos con Status: ${status}`);\n      return of([]);\n    }));\n  }\n  addTask(task) {\n    this.storageTasks.push({\n      id: uuid(),\n      dateInitTodo: new Date(),\n      ...task\n    });\n  }\n  removeAllToDos() {\n    this.storageTasks.forEach(storageTasks => storageTasks.status = 'removed');\n  }\n  removeToDo(id) {\n    this.storageTasks.forEach(storageTasks => {\n      if (storageTasks.id === id) {\n        storageTasks.status = 'removed';\n      }\n    });\n  }\n  updateToDo(todo) {\n    console.log('- updateToDo: ', todo);\n    this.storageTasks.forEach(itemTodo => {\n      console.log(itemTodo);\n      if (todo.id == itemTodo.id) itemTodo.status = todo.status;\n    });\n  }\n  updateAllToDos(status) {\n    console.log('- updateAllToDos()');\n    this.storageTasks.forEach(itemTodo => {\n      if (itemTodo.status == 'removed' && status === 'end') return;\n      itemTodo.status = status;\n    });\n  }\n  resetToDos() {\n    this.storageTasks = [];\n  }\n}\n_class = TasksService;\n_class.ɵfac = function TasksService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["catchError","of","tap","v4","uuid","environment","TasksService","constructor","http","apiUrl","storageTasks","loadLocalStorage","localStorage","getItem","_tagsHistory","JSON","parse","length","searchTag","getToDosByStatus","status","get","pipe","todos","console","log","addTask","task","push","id","dateInitTodo","Date","removeAllToDos","forEach","removeToDo","updateToDo","todo","itemTodo","updateAllToDos","resetToDos","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/Users/aarongl/Developer/PruebasTecnicas/1-todoList/src/app/services/tasks.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of, tap } from 'rxjs';\n\nimport { v4 as uuid } from 'uuid';\n\nimport { environment } from 'src/environments/environment.development';\nimport { Status, ToDo } from '../interfaces/todos.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TasksService {\n  public apiUrl:string = environment.apiUrl;\n\n  public storageTasks: ToDo[] = [];\n\n  constructor(private http:HttpClient) {}\n\n  private loadLocalStorage(): void {\n    if (!localStorage.getItem('history')) return;\n\n    this._tagsHistory = JSON.parse(localStorage.getItem('history')!);\n\n    if (this._tagsHistory.length === 0) return;\n\n    this.searchTag(this._tagsHistory[0]);\n  }\n\n  public getToDosByStatus(status:string):Observable<ToDo> {\n    return this.http.get(`${this.apiUrl}/todos/?status=${status}`)\n      .pipe(\n        tap((todos: any) => {\n          console.log(todos);\n          this.storageTasks\n        }),\n        catchError(() => {\n          console.log(`- Error al extraer ToDos con Status: ${status}`)\n          return of([])\n        })\n      )\n  }\n  \n  public addTask(task: ToDo): void {\n    this.storageTasks.push({id: uuid(), dateInitTodo: new Date(), ...task})\n    \n  }\n\n  public removeAllToDos():void {\n    this.storageTasks.forEach(storageTasks => storageTasks.status = 'removed');\n\n  }\n\n  public removeToDo(id: string): void {\n    this.storageTasks.forEach(storageTasks => {\n      if (storageTasks.id === id) {\n        storageTasks.status = 'removed'\n      }\n    });\n\n  }\n\n  public updateToDo(todo:any): void {\n    console.log('- updateToDo: ', todo);\n  \n    this.storageTasks.forEach(itemTodo => {\n      console.log(itemTodo);\n      \n      if (todo.id == itemTodo.id) itemTodo.status = todo.status;\n\n    });\n\n  }\n\n  public updateAllToDos(status:Status): void {\n    console.log('- updateAllToDos()');\n    this.storageTasks.forEach(itemTodo => {\n      \n      if (itemTodo.status == 'removed' && status === 'end') return;\n      \n      itemTodo.status = status;\n    });\n\n  }\n\n  public resetToDos(): void {\n    this.storageTasks = [];\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}